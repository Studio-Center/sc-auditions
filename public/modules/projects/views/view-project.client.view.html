<section data-ng-controller="ProjectsController" data-ng-init="loadProject()">
  <div class="page-header">
    <div class="row">
      <div class="col-lg-8 col-md-8 col-sm-8">
        <h2 style="margin:0"><a ng-href="/#!/projects/{{::project._id}}" ng-bind="::project.title"></a> <small>Due <span ng-bind="project.estimatedCompletionDate | amDateFormat:'M/DD/YY h:mm:ss a'"></span> EST</small> </h2>
        <div class="form-group" ng-if="showDateEdit">
          <div class="panel panel-default">
            <div class="panel-heading"> <strong>Due Date/Time (Click to select date and time)</strong> </div>
            <div class="panel-body">
              <div class="controls">
                <div class="dropdown">
                  <div class="input-group"> <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                    <input type="text" class="form-control" data-ng-model="project.estimatedCompletionDate" readonly>
                  </div>
                  <datetimepicker ng-change="updateDueDate()" data-ng-model="project.estimatedCompletionDate" data-datetimepicker-config="{ minuteStep: 30 }"/>
                </div>
                <div style="color:red;font-weight:700" ng-bind="::dateNotice"></div>
              </div>
            </div>
          </div>
        </div>
        <h4>Created by <a ng-href="/#!/usersedit/{{::project.user._id}}" target="_blank" ng-bind="::project.user.displayName"></a> <span ng-bind="project.created | amDateFormat:'M/DD/YY h:mm:ss a'"></span> EST</h4>
        <a class="btn btn-primary" href="/#!/clients/projects/{{::project._id}}" target="_blank">View in Client Portal</a> <a data-ng-if="::permitRoles(['admin','production coordinator']) || isOwner()" class="btn btn-success" ng-click="toggleShowEdit()">Extend Audition</a> <a data-ng-if="::permitRoles(['admin','production coordinator']) || isOwner()" class="btn btn-danger" href="/#!/projects/create/{{::project._id}}">ReAudition</a> </div>
      <div class="col-lg-4 col-md-4 col-sm-4">
        <uib-progressbar value="dynamic" type="success" ng-model="progress"><b>{{dynamic}}%</b></uib-progressbar>

        <select class="form-control" style="display:block;margin:0 auto" ng-model="project.status" ng-show="::permitRoles(['admin', 'producer/auditions director','auditions director', 'production coordinator', 'audio intern'])" ng-change="updateProjectStatus()" ng-class="{redBG: project.status == 'In Progress' && checkPassed(project.estimatedCompletionDate), greenBg: project.status == 'Booked', lgreenBG: project.status == 'Closed - Pending Client Decision', orangeBG: project.status == 'On Hold', lgray: project.status == 'Cancelled', mgray: project.status == 'ReAuditioned', gray: project.status == 'Dead', blueBg: project.status == 'In Progress' && compareDates(project.estimatedCompletionDate),lblueBG: project.status == 'In Progress' && compareDatesDay(project.estimatedCompletionDate) == false && compareDates(project.estimatedCompletionDate) == false, defClr: project.status == 'In Progress' && compareDatesDay(project.estimatedCompletionDate), yellowBg: project.sounders == 'No Sounders - Approved By William' && compareDates(project.estimatedCompletionDate), lyellowBg: project.sounders == 'No Sounders - Approved By William' && compareDates(project.estimatedCompletionDate) == false}">
          <option ng-repeat="item in statusOpts" ng-selected="project.status[0] === item" value="{{::item}}">{{::item}}</option>
        </select>
        <div ng-if="::permitRoles(['admin'])" ng-controller="UsersController" data-ng-init="findFilter('production coordinator')">
          <label>Owner</label>
          <select class="form-control" style="display:block;margin:0 auto" ng-model="project.owner" ng-change="$parent.update(false)">
            <option ng-repeat="user in users" ng-selected="project.owner === user._id" value="{{::user._id}}">{{::user.firstName}} {{::user.lastName}}</option>
          </select>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-6 col-md-6 col-sm-6">
      <div class="panel panel-default">
        <div class="panel-heading"><strong>Description &amp; Specs</strong></div>
        <div class="panel-body" ng-bind-html="project.description"></div>
      </div>
    </div>
    <div class="col-lg-6 col-md-6 col-sm-6">
      <div class="panel panel-default" data-ng-if="::permitRoles(['admin', 'producer/auditions director','auditions director','production coordinator', 'audio intern'])">
        <div class="panel-heading"> <strong>Notes ({{project.discussion.length}})</strong> </div>
        <fieldset>
          <select class="form-control" style="display:block;margin:0 auto" ng-if="::permitRoles(['admin']) || isOwner()" ng-class="{blueBg: project.sounders == 'Sounders', yellowBg: project.sounders == 'No Sounders - Approved By William'}" ng-model="project.sounders" ng-change="updateSoundersStatus()">
            <option ng-repeat="item in soundersOpts" ng-selected="project.sounders[0] == item" value="{{::item}}">{{::item}}</option>
          </select>
          <div ng-if="::!permitRoles(['admin']) && !isOwner()" style="padding:10px;font-weight:700" ng-class="{blueBg: project.sounders == 'Sounders', yellowBg: project.sounders == 'No Sounders - Approved By William'}"> {{project.sounders[0]}} </div>
        </fieldset>
        <fieldset>
          <textarea ng-model="discussion" name="discussion" class="form-control"></textarea>
          <button style="float:right" class="btn btn-primary" ng-click="saveDiscussion()">Save</button>
        </fieldset>
        <div style="max-height:200px;padding:10px;border-top:1px solid #e8e8e8;overflow-y:scroll">
          <div ng-repeat="(key, ditem) in project.discussion.slice().reverse()">
            <h5 ng-if="ditem.deleted === true" class="strike-if"><strong> <span ng-bind="ditem.date | amDateFormat:'M/DD/YY h:mm:ss a'"></span> EST - <a ng-if="ditem.userid" href="/#!/usersedit/{{::ditem.userid}}" target="_blank" ng-bind="::ditem.username"></a> <span ng-if="ditem.userid === ''" ng-bind="::ditem.username"></span> </strong></h5>
            <h5 ng-if="ditem.deleted === false"><strong> <span ng-bind="ditem.date | amDateFormat:'M/DD/YY h:mm:ss a'"></span> EST - <a ng-if="ditem.userid" href="/#!/usersedit/{{::ditem.userid}}" target="_blank" ng-bind="::ditem.username"></a> <span ng-if="ditem.userid === ''" ng-bind="::ditem.username"></span> </strong></h5>
            <div class="clearfix">
              <button ng-if="authentication.user._id === ditem.userid && ditem.deleted === false" style="float:right" class="btn btn-danger" ng-click="deleteDiscussion(key)">Delete</button>
              <div ng-if="ditem.deleted === true" class="strike-if" ng-bind-html="ditem.item | linky:'_blank'"></div>
              <p ng-if="ditem.deleted === false" ng-bind-html="ditem.item | linky:'_blank'"></p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-offset-6 col-lg-6 col-md-offset-6 col-md-6 col-sm-6 col-sm-offset-6">
    <div class="panel panel-default" data-ng-if="::permitRoles(['admin', 'producer/auditions director','auditions director','audio intern','production coordinator'])">
      <div class="panel-heading">
        <h4>Client Notes</h4>
      </div>
      <fieldset>
        <div style="max-height:200px;padding:10px;border-top:1px solid #e8e8e8;overflow-y:scroll">
          <div ng-repeat="(key, note) in project.clientNotes | orderBy:'-date':reverse">
            <h5><strong><span ng-bind="::note.date | amDateFormat:'M/DD/YY h:mm:ss a'"></span> EST - <span ng-bind="::note.username"></span></strong></h5>
            <div ng-bind-html="note.item"></div>
          </div>
        </div>
      </fieldset>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-6 col-md-6 col-sm-6">
      <uib-accordion close-others="oneAtATime">
        <uib-accordion-group is-open="status.open">
          <uib-accordion-heading data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
            <h4 class="panel-title accordion-toggle"> Scripts (<span ng-bind="project.scripts.length"></span>) <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i> </h4>
          </uib-accordion-heading>
          <div data-ng-if="::permitRoles(['admin', 'producer/auditions director','auditions director','audio intern','production coordinator']) || isOwner()" class="clearfix" style="padding-bottom:5px">
            <fieldset>
              <h4>Upload Script: </h4>
              <div ng-file-drop ng-file-select="uploadScript($files)" ng-model="files" ng-model-rejected="rejFiles"
                         drag-over-class="{accept:'dragover', reject:'dragover-err', delay:100}" class="drop-box"
                         ng-multiple="true" ng-accept="'*.pdf'"
                         drop-available="dropAvailable">
                <div ng-hide="dropAvailable">File Drop not available</div>
                <div ng-if="dropAvailable">Drop PDFs</div>
                <div>or click to select</div>
              </div>
            </fieldset>
          </div>
          <ul class="list-group">
            <li class="list-group-item" ng-repeat="(key, script) in project.scripts">
              <div class="row">
                <div class="col-lg-10 col-md-10 col-sm-10"> <span style="display:inline-block"> <strong ng-bind="::key+1+'.'"></strong> <a ng-href="/res/scripts/{{::project._id}}/{{script.file.name | encodeUri}}" target="_blank" ng-bind="::script.file.name" download="{{::script.file.name}}"></a> <a ng-href="/res/scripts/{{::project._id}}/{{::script.file.name}}" target="_blank"> <img src="/img/Adobe-Acrobat-icon.png" alt="download PDF" download="{{::script.file.name}}"> </a><br>
                  <span ng-bind="::script.by.date | amDateFormat:'M/DD/YY h:mm:ss a'"></span> </span> </div>
                <div class="col-lg-1 col-md-1 col-sm-1">
                  <button ng-click="delScript(key)" target="_blank" class="btn btn-danger">Delete</button>
                </div>
              </div>
            </li>
          </ul>
        </uib-accordion-group>
      </uib-accordion>
    </div>
    <div class="col-lg-6 col-md-6 col-sm-6">
    <uib-accordion close-others="oneAtATime">
      <uib-accordion-group is-open="toggleRefs">
        <uib-accordion-heading data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
          <h4 class="panel-title accordion-toggle"> Reference Files (<span ng-bind="project.referenceFiles.length"></span>)<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i> </h4>
        </uib-accordion-heading>
        <div data-ng-if="::permitRoles(['admin', 'producer/auditions director','auditions director','audio intern','production coordinator']) || isOwner()" class="clearfix" style="padding-bottom:5px">
          <h4>Upload Reference: </h4>
          <div ng-file-drop ng-file-select="uploadReferenceFile($files)" ng-model="files" ng-model-rejected="rejFiles"
	                         drag-over-class="{accept:'dragover', reject:'dragover-err', delay:100}" class="drop-box"
	                         ng-multiple="true" ng-accept="'*'"
	                         drop-available="dropAvailable">
            <div ng-hide="dropAvailable">File Drop not available</div>
            <div ng-if="dropAvailable">Drop Anything you would like.</div>
            <div>or click to select</div>
          </div>
        </div>
        <ul class="list-group">
          <li class="list-group-item" ng-repeat="(key, referenceFile) in project.referenceFiles">
            <div class="row">
              <div class="col-lg-10 col-md-10 col-sm-10"> <span style="display:inline-block"> <strong ng-bind="::key+1+'.'"></strong> <a ng-href="/res/referenceFiles/{{::project._id}}/{{referenceFile.file.name | encodeUri}}" target="_blank" ng-bind="::referenceFile.file.name" download="{{::referenceFile.file.name}}"></a><br>
                <span ng-bind="::referenceFile.by.date | amDateFormat:'M/DD/YY h:mm:ss a'"></span> </span>
                <div ng-if="checkForAudio(referenceFile.file.name)">
                  <button ng-click="playAudioNoTrack(key, referenceFile.file.name, '/res/referenceFiles/{{::project._id}}/')" class="btn btn-primary">
                  <span ng-if="lastAudioID == key && audioStatus == 1"> <img src="/img/Aqua-Pause-icon.png" style="width:35px;height:auto" alt="pause icon">
                  <div ng-if="!audio.mobile">
                  <input class="form-control" type="range" min="0" max="1" step="0.01" ng-model="audio.progress">
                </div>
                </span> <span ng-if="lastAudioID != key || audioStatus != 1"> <img src="/img/aqua-play-icon.png" style="width:35px;height:auto" alt="play icon"> </span>
                </button>
                <button ng-click="stopAudio()" class="btn btn-primary" ng-if="lastAudioID == key && audioStatus == 1" ng-show="!audio.mobile"> <img src="/img/Aqua-Stop-icon.png" style="width:35px;height:auto" alt="stop icon"> </button>
              </div>
            </div>
            <div class="col-lg-1 col-md-1 col-sm-1">
              <button data-ng-if="::permitRoles(['admin', 'producer/auditions director','auditions director','audio intern','production coordinator']) || isOwner()" ng-click="delReferenceFile(key)" target="_blank" class="btn btn-danger">Delete</button>
            </div>
          </div>
          </li>
        </ul>
      </uib-accordion-group>
    </uib-accordion>
  </div>
  </div>
  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
      <uib-accordion close-others="oneAtATime">
      <uib-accordion-group is-open="status.open">
      <uib-accordion-heading data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
        <h4 class="panel-title accordion-toggle"> Auditions (<span ng-bind="project.auditions.length + projAuditions.length"></span>)<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i> </h4>
      </uib-accordion-heading>
      <div data-ng-if="::permitRoles(['admin', 'producer/auditions director','auditions director','audio intern','production coordinator']) || isOwner()" class="clearfix" style="padding-bottom:5px">
        <h4>Upload Audition Files: (*.mp3 only!)</h4>
        <div ng-file-drop ng-file-select="uploadAudition($files)" ng-model="files" ng-model-rejected="rejFiles"
	                         drag-over-class="{accept:'dragover', reject:'dragover-err', delay:100}" class="drop-box"
	                         ng-multiple="true" ng-accept="'*.mp3'"
	                         drop-available="dropAvailable">
          <div ng-hide="dropAvailable">File Drop not available</div>
          <div ng-if="dropAvailable">Drop *.mp3 files..</div>
          <div>or click to select</div>
        </div>
      </div>
      <div ng-if="project.auditions" style="text-align:center;padding:10px 0"> <a href="" class="btn btn-primary" ng-click="downloadAllAuditions()">Download All</a> <a href="" class="btn btn-primary" ng-click="checkAllFiles()">Check All Files</a> | <a href="" class="btn btn-primary" ng-click="deleteAllAuditions()">Delete All</a></div>
      <div class="table-responsive">
      <table class="table table-striped">
        <tr>
          <th> # </th>
          <th> File </th>
          <th> Playback </th>
          <th> Plays </th>
          <th> Talent </th>
          <td> Rating
            </th>
          <th> Published </th>
          <th> Booked </th>
          <th> Favorited </th>
        </tr>

	  <!-- new audition file iteration -->
        <tr ng-repeat="(key, audition) in projAuditions track by $index">
          <td><span ng-bind="::key+1"></span></td>
          <td><div ng-if="audition.filecheck === 2" style="font-size:18px;color:red;font-weight:700"> FILE NOT FOUND ON SERVER! <br>
              PLEASE UPLOAD AGAIN! </div>
            <a ng-href="/res/auditions/{{::project._id}}/{{audition.file.name | encodeUri}}" target="_blank" data-ng-bind="audition.file.name" class="inline-playable" download="{{audition.file.name}}"> ngAudio </a>
            <p> <strong> Posted by: </strong> <a ng-href="/#!/usersedit/{{audition.approved.by.userId}}" target="_blank"> <span ng-bind="audition.approved.by.name"></span> </a><br>
              <strong> On: </strong> <span ng-bind="audition.approved.by.date | amDateFormat:'M/DD/YY h:mm:ss a'"></span> </p>
            <p ng-if="audition.hidden == true" style="font-size:18px;color:red;font-weight:700"> HIDDEN BY CLIENT </p>
            <button ng-click="toggleShowRename(key)" class="btn btn-primary"> Rename </button>
            <div ng-if="showRename[key]">
              <input type="text" ng-model="audition.rename" ng-init="audition.rename = audition.file.name" placeholder="Enter new filename" class="form-control">
              <button ng-click="renameSingle(audition);toggleShowRename(key);" class="btn btn-primary"> Update </button>
              <button ng-click="toggleShowRename(key)" class="btn btn-primary"> Cancel </button>
            </div>
            <button data-ng-if="::permitRoles(['admin', 'producer/auditions director','auditions director','audio intern'])" ng-click="delAuditionSingle(audition)" class="btn btn-danger"> Delete </button></td>
          <td><button ng-click="playAudioNoTrack(key, audition.file.name)" class="btn btn-primary">
            <span ng-if="lastAudioID == key && audioStatus == 1"> <img src="/img/Aqua-Pause-icon.png" style="width:35px;height:auto" alt="pause icon">
            <div ng-if="!audio.mobile">
            <input class="form-control" type="range" min="0" max="1" step="0.01" ng-model="audio.progress">
        </div>

        </span>
        <span ng-if="lastAudioID != key || audioStatus != 1"> <img src="/img/aqua-play-icon.png" style="width:35px;height:auto" alt="play icon"> </span>
        </button>

        <button ng-click="stopAudio()" class="btn btn-primary" ng-if="lastAudioID == key && audioStatus == 1" ng-show="!audio.mobile"> <img src="/img/Aqua-Stop-icon.png" style="width:35px;height:auto" alt="stop icon"> </button>
        </td>

        <td><p ng-bind="audition.playCnt"></p></td>
          <td><div ng-if="audition.talent == ''"> <img src="img/warning.jpg" alt="talent warning icon" style="width:20px;height:auto"> Talent Not Assigned </div>
            <select class="form-control" ng-model="audition.talent" ng-options="talent.talentId as talent.name for talent in project.talent | orderBy:'name'" ng-change="updateTalentAssignedStatusSingle(audition)">
            </select></td>
          <td><uib-rating ng-model="audition.avgRating" readonly="false" ng-click="updateRatingSingle(audition, false)" max="max" on-leave="overStar = audition.avgRating" on-hover="hoveringOver(value,key)"></rating>
            <p data-ng-if="audition.avgRating">Average: <br>
              <uib-rating ng-model="audition.avgRating" readonly="true" max="max" on-leave="overStar = audition.avgRating" ></rating>
          </td>
          <td><input style="-ms-transform: scale(2);-moz-transform: scale(2);-webkit-transform: scale(2);-o-transform: scale(2);margin:10px" type="checkbox" value="true" ng-click="updatePublishedSingle(audition)" ng-model="projAuditions[key].published"></td>
          <td><img ng-if="audition.booked" src="/img/green-check.png" style="width:20px;height:auto"></td>
          <td><img ng-if="audition.favorite == 1" src="/img/gold-trophy.png" alt="favorited audition"></td>
        </tr>

	  <!-- old audition file iteration -->
        <tr ng-repeat="(key, audition) in project.auditions track by $index">
          <td><span ng-bind="::key+1"></span></td>
          <td><div ng-if="audition.filecheck === 2" style="font-size:18px;color:red;font-weight:700"> FILE NOT FOUND ON SERVER! <br>
              PLEASE UPLOAD AGAIN! </div>
            <a ng-href="/res/auditions/{{::project._id}}/{{audition.file.name | encodeUri}}" target="_blank" data-ng-bind="audition.file.name" class="inline-playable" download="{{audition.file.name}}"> ngAudio </a>
            <p> <strong> Posted by: </strong> <a ng-href="/#!/usersedit/{{::audition.approved.by.userId}}" target="_blank"> <span ng-bind="::audition.approved.by.name"></span> </a><br>
              <strong> On: </strong> <span ng-bind="::project.auditions[key].approved.by.date | amDateFormat:'M/DD/YY h:mm:ss a'"></span> </p>
            <p ng-if="audition.hidden == true" style="font-size:18px;color:red;font-weight:700"> HIDDEN BY CLIENT </p>
            <button ng-click="toggleShowRename(key)" class="btn btn-primary"> Rename </button>
            <div ng-if="showRename[key]">
              <input type="text" ng-model="project.auditions[key].rename" ng-init="project.auditions[key].rename = project.auditions[key].file.name" placeholder="Enter new filename" class="form-control">
              <button ng-click="update(false);toggleShowRename(key);" class="btn btn-primary"> Update </button>
              <button ng-click="toggleShowRename(key)" class="btn btn-primary"> Cancel </button>
            </div>
            <button data-ng-if="::permitRoles(['admin', 'producer/auditions director','auditions director','audio intern'])" ng-click="delAudition(key)" class="btn btn-danger"> Delete </button></td>
          <td><button ng-click="playAudioNoTrack(key, audition.file.name)" class="btn btn-primary">
            <span ng-if="lastAudioID == key && audioStatus == 1"> <img src="/img/Aqua-Pause-icon.png" style="width:35px;height:auto" alt="pause icon">
            <div ng-if="!audio.mobile">
            <input class="form-control" type="range" min="0" max="1" step="0.01" ng-model="audio.progress">
        </div>

        </span>
        <span ng-if="lastAudioID != key || audioStatus != 1"> <img src="/img/aqua-play-icon.png" style="width:35px;height:auto" alt="play icon"> </span>
        </button>

        <button ng-click="stopAudio()" class="btn btn-primary" ng-if="lastAudioID == key && audioStatus == 1" ng-show="!audio.mobile"> <img src="/img/Aqua-Stop-icon.png" style="width:35px;height:auto" alt="stop icon"> </button>
        </td>

        <td><p ng-bind="project.auditions[key].playCnt"></p></td>
          <td><div ng-if="!project.auditions[key].talent"> <img src="img/warning.jpg" alt="talent warning icon" style="width:20px;height:auto"> Talent Not Assigned </div>
            <select class="form-control" ng-model="project.auditions[key].talent" ng-options="talent.talentId as talent.name for talent in project.talent | orderBy:'name'" ng-change="updateTalentAssignedStatus(project.auditions[key].talent)">
            </select></td>
          <td><uib-rating ng-model="audition.avgRating" readonly="false" ng-click="updateRating(audition.file.path, false)" max="max" on-leave="overStar = audition.avgRating" on-hover="hoveringOver(value,key)"></rating>
            <p data-ng-if="audition.avgRating">Average: <br>
              <uib-rating ng-model="audition.avgRating" readonly="true" max="max" on-leave="overStar = audition.avgRating" ></rating>
          </td>
          <td><input style="-ms-transform: scale(2);-moz-transform: scale(2);-webkit-transform: scale(2);-o-transform: scale(2);margin:10px" type="checkbox" value="true" ng-click="updatePublished(key)" ng-model="project.auditions[key].published"></td>
          <td><img ng-if="audition.booked" src="/img/green-check.png" style="width:20px;height:auto"></td>
          <td><img ng-if="audition.favorite == 1" src="/img/gold-trophy.png" alt="favorited audition"></td>
        </tr>

      </table>
    </div>
    </uib-accordion-group>
    </uib-accordion>
  </div>
  </div>
  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
      <uib-accordion close-others="oneAtATime">
        <uib-accordion-group is-open="status.open">
          <uib-accordion-heading data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
            <h4 class="panel-title accordion-toggle"> Talent (<span ng-bind="project.talent.length"></span>)<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i> </h4>
          </uib-accordion-heading>
          <div class="table-responsive">
            <table class="table table-striped">
              <tr>
                <th> <a href="" ng-click="updatePred(predicate == 'name' ? '-name' : 'name'); reverse=false">Name</a></span> <span ng-if="predicate == '-name'">(^)</span> <span ng-if="predicate == 'name'">(V)</span> </th>
                <th> TL </th>
                <th> Location </th>
                <th>Requested</th>
                <th> <a href="" ng-click="updatePred(predicate == 'status' ? '-status' : 'status'); reverse=false">Status</a></span> <span ng-if="predicate == '-status'">(^)</span> <span ng-if="predicate == 'status'">(V)</span> </th>
                <th> <a href="" ng-click="updatePred(predicate == 'part' ? '-part' : 'part'); reverse=false">Part</a></span> <span ng-if="predicate == '-part'">(^)</span> <span ng-if="predicate == 'part'">(V)</span> </th>
                <th>Email</th>
                <th>Booked</th>
                <th>Note</th>
                <th></th>
              </tr>
              <tr ng-repeat="(key, member) in project.talent | orderBy:predicate:reverse">
                <td><a target="_blank" ng-href="/#!/talents/{{::member.talentId}}"> <span ng-bind="::member.nameLnmCode"></span> </a><br>
                  <span ng-bind="::member.added | amDateFormat:'M/DD/YY h:mm:ss a'"></span></td>
                <td><a target="_blank" ng-href="/#!/projects/talent-upload/{{::project._id}}/{{::member.talentId}}" title="talent auditions upload link">^</a></td>
                <td><span ng-bind="::member.locationISDN"></span></td>
                <td><span ng-if="::member.requested == true">R</span></td>
                <td><select class="form-control" ng-model="talentStatus[member.talentId]"
									ng-init="talentStatus[member.talentId] = getTalentStatus(member.talentId) || talentStatus[0]" style="width:100px"
									ng-change="updateTalentStatus(member.talentId, talentStatus[member.talentId])" ng-options="item for item in talentStatus">
                  </select></td>
                <td><span ng-bind="::member.part"></span></td>
                <td><button class="btn btn-primary" ng-click="$parent.sendTalentEmail(member.talentId)"> <img style="width:30px;height:auto" src="/img/envelope.png" alt="envelope image"> </button></td>
                <td><input style="-ms-transform: scale(2);-moz-transform: scale(2);-webkit-transform: scale(2);-o-transform: scale(2);margin:10px"
									type="checkbox" data-ng-model="talentBooked[key]" ng-checked="getBooked(member.talentId)" ng-click="toggleBooked(member.talentId)"></td>
                <td><textarea ng-model="talentNote[member.talentId]" name="talentNote[member.talentId]" ng-init="talentNote[member.talentId] = getTalentNote(member.talentId)" class="form-control">
									</textarea>
                  <button style="float:right" class="btn btn-primary" ng-click="saveTalentNote(member.talentId)">Save</button></td>
                <td><button ng-if="member.submissions" target="_blank" href="#" ng-click="talentSubmissionsModal(member)" title="talent auditions upload link"></button></td>
              </tr>
            </table>
          </div>
          <uib-accordion close-others="oneAtATime" data-ng-if="::permitRoles(['admin', 'producer/auditions director','auditions director','audio intern','production coordinator'])">
            <uib-accordion-group is-open="statusInt.open">
              <uib-accordion-heading data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
                <h4 class="panel-title accordion-toggle"> Edit Talent<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': statusInt.open, 'glyphicon-chevron-right': !statusInt.open}"></i> </h4>
              </uib-accordion-heading>
              <div class="controls" ng-module="talents">
                <div style="text-align:center">
                  <button class="btn btn-primary" ng-click="createTalent()">Create Talent</button>
                </div>
                <div ng-controller="TalentsController" data-ng-init="findLimitWithFilter()">
                  <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-3">
                      <label>Search by First Name:</label>
                      <input ng-model="filter.fName" class="form-control" ng-change="findLimitWithFilter()">
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3">
                      <label>Search by Last Name:</label>
                      <input ng-model="filter.lName" class="form-control" ng-change="findLimitWithFilter()">
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3">
                      <label>Search by Email:</label>
                      <input ng-model="filter.email" class="form-control" ng-change="findLimitWithFilter()">
                    </div>
                      <div class="col-lg-3 col-md-3 col-sm-3">
                        <label>Search by Typecast:</label>
                        <input ng-model="filter.typeCasts" class="form-control" ng-change="findLimitWithFilter()">
                      </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-3">
                      <div class="btn-group" data-toggle="buttons" style="padding-top:15px">
                        <label ng-change="findLimitWithFilter()" class="btn btn-primary" ng-model="filter.gender" uib-btn-radio="'male'">Male</label>
                        <label ng-change="findLimitWithFilter()" class="btn btn-primary" ng-model="filter.gender" uib-btn-radio="'female'">Female</label>
                        <label ng-change="findLimitWithFilter()" class="btn btn-primary" ng-model="filter.gender" uib-btn-radio="">All</label>
                      </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6">
                      <div class="btn-group" data-toggle="buttons" style="padding-top:15px">
                        <label ng-change="findLimitWithFilter()" class="btn btn-primary" ng-model="filter.unionStatus" uib-btn-radio="'union'">Union</label>
                        <label ng-change="findLimitWithFilter()" class="btn btn-primary" ng-model="filter.unionStatus" uib-btn-radio="'non-union'">Non-union</label>
                        <label ng-change="findLimitWithFilter()" class="btn btn-primary" ng-model="filter.unionStatus" uib-btn-radio="['union','non-union']">Union and Non-union</label>
                        <label ng-change="findLimitWithFilter()" class="btn btn-primary" ng-model="filter.unionStatus" uib-btn-radio="">All</label>
                      </div>
                    </div>
                    <div class="col-lg-2 col-md-2 col-sm-2">
                      <label>Emailer</label>
                      <input ng-change="findLimitWithFilter()" type="checkbox" ng-model="filter.type" ng-true-value="'email'" ng-false-value="''" class="form-control">
                    </div>
                  </div>
                  <div class="row" style="padding-bottom:10px">
                    <div class="col-lg-3 col-md-3 col-sm-3">
                      <div class="btn-group" data-toggle="buttons" style="padding-top:15px">
                        <label ng-change="findLimitWithFilter()" class="btn btn-primary" ng-model="filter.ageRange" uib-btn-radio="'kid'">Kid</label>
                        <label ng-change="findLimitWithFilter()" class="btn btn-primary" ng-model="filter.ageRange" uib-btn-radio="'teen'">Teen</label>
                        <label ng-change="findLimitWithFilter()" class="btn btn-primary" ng-model="filter.ageRange" uib-btn-radio="'adult'">Adult</label>
                        <label ng-change="findLimitWithFilter()" class="btn btn-primary" ng-model="filter.ageRange" uib-btn-radio="">All</label>
                      </div>
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3">
                      <select ng-change="findLimitWithFilter()" ng-model="filter.locationISDN" class="form-control" style="margin-top:15px">
                        <option value="">All Locations</option>
                        <option ng-repeat="item in locations" value="{{item}}">{{item}}</option>
                      </select>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6">
                      <div class="btn-group" data-toggle="buttons" style="padding-top:15px">
                        <label ng-change="findLimitWithFilter()" class="btn btn-primary" ng-model="filter.voa" uib-btn-radio="'true'">VOA</label>
                        <label ng-change="findLimitWithFilter()" class="btn btn-primary" ng-model="filter.typeCasts" uib-btn-radio="'African-American'">African-American</label>
                        <label ng-change="findLimitWithFilter()" class="btn btn-primary" ng-model="filter.typeCasts" uib-btn-radio="'Caucasian'">Caucasian</label>
                        <label ng-change="findLimitWithFilter()" class="btn btn-primary" ng-model="filter.typeCasts" uib-btn-radio="'British'">British</label>
                        <label ng-change="findLimitWithFilter()" class="btn btn-primary" ng-model="filter.typeCasts" uib-btn-radio="'Spanish'">Spanish</label>
                        <label ng-change="findLimitWithFilter()" class="btn btn-primary" ng-model="filter.typeCasts" uib-btn-radio="'Foreign Language'">Foreign Language</label>
                        <label ng-change="findLimitWithFilter()" class="btn btn-primary" ng-model="filter.typeCasts" uib-btn-radio="">All</label>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                      <select ng-init="limit = 20" ng-model="limit" class="form-control" ng-change="findLimitWithFilter()">
                        <option value="5" selected>Show 5 per page</option>
                        <option value="10">Show 10 per page</option>
                        <option value="15">Show 15 per page</option>
                        <option value="20">Show 20 per page</option>
                        <option value="30">Show 30 per page</option>
                        <option value="50">Show 50 per page</option>
                        <option value="100">Show 100 per page</option>
                        <option value="200">Show 200 per page</option>
                      </select>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-2 col-md-2 col-sm-2">
                      <p style="margin-top:27px"> {{(limit*currentPage)+1}}-{{limit*(currentPage+1)}} Talent(s) of {{talentsTotalCnt}}</p>
                    </div>
                    <div class="col-lg-10 col-md-10 col-sm-10">
                      <div class="text-center">
                        <ul class="pagination">
                          <li ng-class="{disabled: currentPage == 0}"> <a href ng-click="changePage(currentPage-1)">« Prev</a> </li>
                          <li ng-repeat="n in range(0, Math.floor(talentsTotalCnt/limit))" ng-class="{active: n == currentPage}" ng-click="setPage()"> <a href ng-bind="n + 1">1</a> </li>
                          <li ng-class="{disabled: currentPage == Math.floor(talentsTotalCnt/limit)}"> <a href ng-click="changePage(currentPage+1)">Next »</a> </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <div class="table-responsive">
                    <table class="table table-striped">
                      <tr>
                        <th><b>C</b></th>
                        <th><b>R</b></th>
                        <th><b>Part</b></th>
                        <th><b>Info</b></th>
                      </tr>
                      <tr ng-repeat="(key, talent) in talents">
                        <td><input style="-ms-transform: scale(2);-moz-transform: scale(2);-webkit-transform: scale(2);-o-transform: scale(2);margin:10px" ng-if="addTalent" type="checkbox" value="{{::talent._id}}" ng-click="updateTalent(talent._id, talent.name + ' ' + talent.lastName, talent.email, talent.locationISDN, talent.name + ' ' + talent.lastNameCode)" ng-checked="checkTalent(talent._id)"></td>
                        <td><input style="-ms-transform: scale(2);-moz-transform: scale(2);-webkit-transform: scale(2);-o-transform: scale(2);margin:10px" ng-if="addTalent" type="checkbox" value="{{::talent._id}}" ng-click="updateRequestTalent(talent._id, talent.name + ' ' + talent.lastName, talent.email, talent.locationISDN, talent.name + ' ' + talent.lastNameCode)" ng-checked="checkRequestedTalent(talent._id)"></td>
                        <td><input type="text" class="form-control" ng-model="parts[talent._id]" ng-if="showPartFld(talent._id)">
                          <div ng-if="showPartFld(talent._id) == false" ng-bind="::showPartString(talent._id)"></div></td>
                        <td><a target="_blank" href="/#!/talents/{{::talent._id}}" ng-bind="::talent.name + ' ' + talent.lastName"></a> {{::talent.birthYear}} - <span ng-bind="::talent.locationISDN"></span> - Outage <span ng-if="!talent.outageTimes">None</span><span ng-if="::talent.outageTimes != ''" ng-bind="::talent.outageTimes"></span><br>
                        <strong>Typecasts</strong>
                        <span ng-repeat="(key, usval) in talent.typeCasts">{{usval}}, </span></td>
                      </tr>
                    </table>
                  </div>
                  <div class="row">
                    <div class="col-lg-2 col-md-2 col-sm-2">
                      <p style="margin-top:27px"> {{(limit*currentPage)+1}}-{{limit*(currentPage+1)}} Talent(s) of {{talentsTotalCnt}} </p>
                    </div>
                    <div class="col-lg-10 col-md-10 col-sm-10">
                      <div class="text-center">
                        <ul class="pagination">
                          <li ng-class="{disabled: currentPage == 0}"> <a href ng-click="changePage(currentPage-1)">« Prev</a> </li>
                          <li ng-repeat="n in range(0, Math.floor(talentsTotalCnt/limit))" ng-class="{active: n == currentPage}" ng-click="setPage()"> <a href ng-bind="n + 1">1</a> </li>
                          <li ng-class="{disabled: currentPage == Math.floor(talentsTotalCnt/limit)}"> <a href ng-click="changePage(currentPage+1)">Next »</a> </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </uib-accordion-group>
          </uib-accordion>
        </uib-accordion-group>
      </uib-accordion>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-6 col-md-6 col-sm-6">
      <uib-accordion close-others="oneAtATime" data-ng-if="::permitRoles(['admin', 'producer/auditions director','auditions director','audio intern','production coordinator'])">
        <uib-accordion-group is-open="status.open">
          <uib-accordion-heading data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
            <h4 class="panel-title accordion-toggle"> Main Clients (<span ng-bind="project.client.length"></span>)<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i> </h4>
          </uib-accordion-heading>
          <div style="text-align:center;padding-bottom:7px">
            <button class="btn btn-primary" ng-click="sendClientEmail('opening')">Opening Email</button>
            <button class="btn btn-primary" ng-click="sendClientEmail('carryover')">Carryover Email</button>
            <button class="btn btn-primary" ng-click="sendClientEmail('closing')">Closing Email</button>
          </div>
          <ul class="list-group">
            <li class="list-group-item" ng-repeat="(key, member) in project.client" ng-module="users" ng-controller="UsersController" data-ng-init="getOne(member.userId)">
              <input style="-ms-transform: scale(2);-moz-transform: scale(2);-webkit-transform: scale(2);-o-transform: scale(2);margin:10px" type="checkbox" ng-model="selectedMainClients[key]" ng-true-value="'{{::member.userId}}'">
              <a target="_blank" ng-href="/#!/usersedit/{{::member.userId}}" ng-bind="::member.name + ' ' + member.company"></a> - <span ng-bind="::useredit.company"></span> </li>
          </ul>
          <uib-accordion close-others="oneAtATime" ng-if="::permitRoles(['admin','production coordinator'])">
            <uib-accordion-group is-open="statusInt.open">
              <uib-accordion-heading data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
                <h4 class="panel-title accordion-toggle"> Edit Main Clients<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': statusInt.open, 'glyphicon-chevron-right': !statusInt.open}"></i> </h4>
              </uib-accordion-heading>
              <div class="controls" ng-module="users">
                <div style="text-align:center">
                  <button class="btn btn-primary" ng-click="createClient('client')">Create Client</button>
                </div>
                <div ng-controller="UsersController" data-ng-init="findFilter('client')">
                  <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-3">
                      <label>Search by First Name:</label>
                      <input ng-model="filter.fName" class="form-control" ng-change="findLimitWithFilter()">
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3">
                      <label>Search by Last Name:</label>
                      <input ng-model="filter.lName" class="form-control" ng-change="findLimitWithFilter()">
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3">
                      <label>Search by Email:</label>
                      <input ng-model="filter.email" class="form-control" ng-change="findLimitWithFilter()">
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3">
                      <label>Search by Company:</label>
                      <input ng-model="filter.company" class="form-control" ng-change="findLimitWithFilter()">
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                      <select ng-init="limit = 20" ng-model="limit" class="form-control" ng-change="findLimitWithFilter()">
                        <option value="5" selected>Show 5 per page</option>
                        <option value="10">Show 10 per page</option>
                        <option value="15">Show 15 per page</option>
                        <option value="20">Show 20 per page</option>
                        <option value="30">Show 30 per page</option>
                        <option value="50">Show 50 per page</option>
                        <option value="100">Show 100 per page</option>
                        <option value="200">Show 200 per page</option>
                      </select>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-2 col-md-2 col-sm-2">
                      <p style="margin-top:27px"> {{(limit*currentPage)+1}}-{{limit*(currentPage+1)}} User(s) of {{usersTotalCnt}} </p>
                    </div>
                    <div class="col-lg-10 col-md-10 col-sm-10">
                      <div class="text-center">
                        <ul class="pagination">
                          <li ng-class="{disabled: currentPage == 0}"> <a href ng-click="changePage(currentPage-1)">« Prev</a> </li>
                          <li ng-repeat="n in range(0, Math.floor(usersTotalCnt/limit))" ng-class="{active: n == currentPage}" ng-click="setPage()"> <a href ng-bind="n + 1">1</a> </li>
                          <li ng-class="{disabled: currentPage == Math.floor(usersTotalCnt/limit)}"> <a href ng-click="changePage(currentPage+1)">Next »</a> </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <ul class="list-group">
                    <li class="list-group-item" ng-repeat="(key, user) in users">
                      <input style="-ms-transform: scale(2);-moz-transform: scale(2);-webkit-transform: scale(2);-o-transform: scale(2);margin:10px" type="checkbox" value="{{::user._id}}" ng-click="updateClient(user._id, user.displayName, user.email)" ng-checked="checkClientUsers(user._id)">
                      <a target="_blank" ng-href="/#!/usersedit/{{::user._id}}" ng-bind="::user.displayName"></a> - <span ng-bind="::user.company"></span> </li>
                  </ul>
                  <div class="row">
                    <div class="col-lg-2 col-md-2 col-sm-2">
                      <p style="margin-top:27px"> {{(limit*currentPage)+1}}-{{limit*(currentPage+1)}} User(s) of {{usersTotalCnt}} </p>
                    </div>
                    <div class="col-lg-10 col-md-10 col-sm-10">
                      <div class="text-center">
                        <ul class="pagination">
                          <li ng-class="{disabled: currentPage == 0}"> <a href ng-click="changePage(currentPage-1)">« Prev</a> </li>
                          <li ng-repeat="n in range(0, Math.floor(usersTotalCnt/limit))" ng-class="{active: n == currentPage}" ng-click="setPage()"> <a href ng-bind="n + 1">1</a> </li>
                          <li ng-class="{disabled: currentPage == Math.floor(usersTotalCnt/limit)}"> <a href ng-click="changePage(currentPage+1)">Next »</a> </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </uib-accordion-group>
          </uib-accordion>
        </uib-accordion-group>
      </uib-accordion>
      <uib-accordion close-others="oneAtATime">
        <uib-accordion-group is-open="status.open">
          <uib-accordion-heading data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
            <h4 class="panel-title accordion-toggle"> Additional Clients (<span ng-bind="project.clientClient.length"></span>)<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i> </h4>
          </uib-accordion-heading>
          <ul class="list-group">
            <li class="list-group-item" ng-repeat="(key, member) in project.clientClient" ng-module="users" ng-controller="UsersController" data-ng-init="getOne(member.userId)"> <a target="_blank" ng-href="/#!/usersedit/{{::member.userId}}" ng-bind="::member.name"> </a> - <span ng-bind="::useredit.company"></span> </li>
          </ul>
          <uib-accordion close-others="oneAtATime" ng-if="::permitRoles(['admin','production coordinator'])">
            <uib-accordion-group is-open="statusInt.open">
              <uib-accordion-heading data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
                <h4 class="panel-title accordion-toggle"> Edit Additional Clients<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': statusInt.open, 'glyphicon-chevron-right': !statusInt.open}"></i> </h4>
              </uib-accordion-heading>
              <div class="controls" ng-module="users">
                <div style="text-align:center">
                  <button class="btn btn-primary" ng-click="createClient('client-client')">Create Client</button>
                </div>
                <div ng-controller="UsersListController" data-ng-init="findFilter('client-client')">
                  <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-3">
                      <label>Search by First Name:</label>
                      <input ng-model="filter.fName" class="form-control" ng-change="findLimitWithFilter()">
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3">
                      <label>Search by Last Name:</label>
                      <input ng-model="filter.lName" class="form-control" ng-change="findLimitWithFilter()">
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3">
                      <label>Search by Email:</label>
                      <input ng-model="filter.email" class="form-control" ng-change="findLimitWithFilter()">
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3">
                      <label>Search by Company:</label>
                      <input ng-model="filter.company" class="form-control" ng-change="findLimitWithFilter()">
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                      <select ng-init="limit = 20" ng-model="limit" class="form-control" ng-change="findLimitWithFilter()">
                        <option value="5" selected>Show 5 per page</option>
                        <option value="10">Show 10 per page</option>
                        <option value="15">Show 15 per page</option>
                        <option value="20">Show 20 per page</option>
                        <option value="30">Show 30 per page</option>
                        <option value="50">Show 50 per page</option>
                        <option value="100">Show 100 per page</option>
                        <option value="200">Show 200 per page</option>
                      </select>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-2 col-md-2 col-sm-2">
                      <p style="margin-top:27px"> {{(limit*currentPage)+1}}-{{limit*(currentPage+1)}} User(s) of {{usersTotalCnt}} </p>
                    </div>
                    <div class="col-lg-10 col-md-10 col-sm-10">
                      <div class="text-center">
                        <ul class="pagination">
                          <li ng-class="{disabled: currentPage == 0}"> <a href ng-click="changePage(currentPage-1)">« Prev</a> </li>
                          <li ng-repeat="n in range(0, Math.floor(usersTotalCnt/limit))" ng-class="{active: n == currentPage}" ng-click="setPage()"> <a href ng-bind="n + 1">1</a> </li>
                          <li ng-class="{disabled: currentPage == Math.floor(usersTotalCnt/limit)}"> <a href ng-click="changePage(currentPage+1)">Next »</a> </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <ul class="list-group">
                    <li class="list-group-item" ng-repeat="(key, user) in users">
                      <input style="-ms-transform: scale(2);-moz-transform: scale(2);-webkit-transform: scale(2);-o-transform: scale(2);margin:10px" type="checkbox" value="{{::user._id}}" ng-click="updateClientClient(user._id, user.displayName, user.email)" ng-checked="checkClientClientUsers(user._id)">
                      <a target="_blank" href="/#!/usersedit/{{::user._id}}" ng-bind="::user.displayName"></a> - <span ng-bind="::user.company"></span> </li>
                  </ul>
                  <div class="row">
                    <div class="col-lg-2 col-md-2 col-sm-2">
                      <p style="margin-top:27px"> {{(limit*currentPage)+1}}-{{limit*(currentPage+1)}} User(s) of {{usersTotalCnt}} </p>
                    </div>
                    <div class="col-lg-10 col-md-10 col-sm-10">
                      <div class="text-center">
                        <ul class="pagination">
                          <li ng-class="{disabled: currentPage == 0}"> <a href ng-click="changePage(currentPage-1)">« Prev</a> </li>
                          <li ng-repeat="n in range(0, Math.floor(usersTotalCnt/limit))" ng-class="{active: n == currentPage}" ng-click="setPage()"> <a href ng-bind="n + 1">1</a> </li>
                          <li ng-class="{disabled: currentPage == Math.floor(usersTotalCnt/limit)}"> <a href ng-click="changePage(currentPage+1)">Next »</a> </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </uib-accordion-group>
          </uib-accordion>
        </uib-accordion-group>
      </uib-accordion>
    </div>
    <div class="col-lg-6 col-md-6 col-sm-6">
      <uib-accordion close-others="oneAtATime" data-ng-if="::permitRoles(['admin', 'producer/auditions director','auditions director','audio intern','production coordinator'])">
        <uib-accordion-group is-open="status.open">
        <uib-accordion-heading data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
          <h4 class="panel-title accordion-toggle"> Phases<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i> </h4>
        </uib-accordion-heading>
        <uib-accordion close-others="oneAtATime">
          <div class="panel panel-default" ng-repeat="(key, phase) in project.phases">
            <div class="panel-heading"><strong ng-bind="::project.phases[key].name"></strong></div>
            <div class="panel-body"> <span>
              <div class="row">
                <div class="col-lg-3 col-md-3 col-sm-3">
                  <label>Status:</label>
                </div>
                <div class="col-lg-9 col-md-9 col-sm-9">
                  <select ng-model="project.phases[key].status" class="form-control" ng-change="updateStatus(key)" ng-options="item for item in project.phases[key].options">
                  </select>
                </div>
              </div>
              <div class="row" ng-if="project.phases[key].changeDate">
                <div class="col-lg-4 col-md-4 col-sm-4">
                  <label>Change Date:</label>
                </div>
                <div class="col-lg-8 col-md-8 col-sm-8">
                  <p ng-bind="project.phases[key].changeDate | amDateFormat:'MM/DD/YY h:mm:ss a'"></p>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-4 col-md-4 col-sm-4">
                  <label>End Date:</label>
                </div>
                <div class="col-lg-8 col-md-8 col-sm-8">
                  <p ng-bind="project.phases[key].endDate | amDateFormat:'MM/DD/YY h:mm:ss a'"></p>
                </div>
              </div>
              </span> </div>
          </div>
        </uib-accordion>
      </uib-accordion>
    </div>
  </div>
  </div>
  <div class="pull-right" data-ng-if="::permitRoles(['admin','production coordinator'])" style="padding-bottom:75px"> <a class="btn btn-primary" ng-href="/#!/projects/{{::project._id}}/edit"> <i class="glyphicon glyphicon-edit"></i> </a> <a class="btn btn-primary" data-ng-click="remove();"> <i class="glyphicon glyphicon-trash"></i> </a> </div>
  <div class="container" style="position:fixed;bottom:0;background:#fff;z-index:999;padding-top:5px">
    <div class="row" data-ng-if="::permitRoles(['admin', 'producer/auditions director','auditions director','audio intern','production coordinator']) || isOwner()">
      <div class="col-lg-12 col-md-12 col-sm-12">
        <ul style="clear:both" ng-if="rejFiles.length > 0" class="response">
          <li class="sel-file" ng-repeat="f in rejFiles"> Rejected file: {{f.name}} - size: {{f.size}}B - type: {{f.type}} </li>
        </ul>
        <div data-ng-bind="uploadStatus"></div>
        <uib-progressbar animate="false" value="uploadprogress" type="success" ng-model="upload"><b ng-bind="uploadfile"></b></uib-progressbar>
      </div>
    </div>
  </div>
  <div class="fade modal-backdrop in" ng-if="processing"></div>
</section>
